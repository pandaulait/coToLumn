<h1>Admin::Texts#edit</h1>
<p>Find me in app/views/admin/texts/edit.html.erb</p>
<link rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css">
<script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
<% if @text.errors.any? %>
    <div id="error_explanation">
      <ul>
       <% @text.errors.full_messages.each do |message| %>
         <li><%= message %></li>
       <% end %>
      </ul>
    </div>
  <% end %>
<h1>テキスト編集フォーム</h1>
<%= form_with model: @chapter, url: text_chapters_path(@text,@chapter) , local:true do |f| %>
  <h4>教科書</h4>
  <%= f.select :status, {'デフォルト': 0,'学校図書 「みんなで学ぶ算数」': 1, '啓林観 「わくわく算数」': 2}, { include_blank: 'どれでもない'}, { class: 'form-control' , required: true } %>
  <h4>チャプター （5-2など）</h4>
  <%= f.text_field :body , required: true%>
  <%= f.text_field :section , required: true%>
  <%= f.submit '選択' %>
<% end %>

<% @chapters.each do |chapter|%>
  <%= chapter.status %>|<%= chapter.body %>-<%= chapter.section %>|<%= link_to "削除", text_chapter_path(@text,chapter), method: :delete %><br />
<% end %>
<%= form_with model: @text,  url: admin_text_path(@text) ,local:true do |f| %>
  <h4>画像</h4>
  <%= f.attachment_field :image %>
  <h4>タイトル</h4>
  <%= f.text_field :title %>
  <h4>本文</h4>
  <%= f.text_area :body ,id: "my-text-area"%>
  <script>
    $(document).on('page:restore', function () {
      location.reload();    });
    $(document).on('turbolinks:load', function () {
      var easyMDE = new EasyMDE({
          autoDownloadFontAwesome: false,
          showIcons: ['strikethrough', 'code', 'table', 'redo', 'heading', 'undo', 'heading-bigger', 'heading-smaller', 'heading-1', 'heading-2', 'heading-3', 'clean-block', 'horizontal-rule'],
          element: document.getElementById('my-text-area'),
      });
    });
  </script>
  <%= f.submit '投稿' %>
<% end %>
<div class="text_literature">
  <%= render 'admin/literatures/text_new', {literature: @literature, text: @text} %>
</div>